(function(a,b){if("function"==typeof define&&define.amd)define(["exports","regenerator-runtime"],b);else if("undefined"!=typeof exports)b(exports,require("regenerator-runtime"));else{var c={exports:{}};b(c.exports,a.regeneratorRuntime),a.store=c.exports}})(this,function(a,b){"use strict";function c(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var f=function(a){return a&&a.__esModule?a:{default:a}}(b),g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b,c){e(this,a),this.data=void 0,this.key=b,this.callBacks=[],c&&c()}return g(a,[{key:"get",value:function(){return this.data}},{key:"set",value:function(){var a=d(f.default.mark(function a(b){return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.data=b,a.next=3,this.callBackAll();case 3:return a.abrupt("return",this.data);case 4:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"connect",value:function(a,b){this.callBacks.includes(a)||this.callBacks.push(a),a.state=a.state||{},b&&b()}},{key:"connections",value:function(){return this.callBacks}},{key:"disconnect",value:function(){var a=d(f.default.mark(function a(b){return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.callBacks.filter(function(a){return b!==a});case 2:this.callBacks=a.sent,console.warn("Disconnected.");case 4:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()},{key:"callBackAll",value:function(){var a=d(f.default.mark(function a(){var b=this;return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(this.callBacks.map(function(){var a=d(f.default.mark(function a(d){return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:d.setState(c({},b.key,b.data));case 1:case"end":return a.stop();}},a,b)}));return function(){return a.apply(this,arguments)}}()));case 2:case"end":return a.stop();}},a,this)}));return function b(){return a.apply(this,arguments)}}()}]),a}();a.default=h});
